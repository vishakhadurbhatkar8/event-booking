<div class="event-details-page">
  @if (event) {
    <h1>{{ event.title }}</h1>
    <p>{{ event.description }}</p>
    <p><strong>Date:</strong> {{ event.date }}</p>
    <p><strong>Location:</strong> {{ event.location }}</p>

    @if (!booking) {
      <button (click)="reserveSeat()">Reserve Seat</button>
    } @else {
      @if (booking.status === 'pending') {
        <div class="booking-status pending">
          <p>‚è≥ Booking Request Submitted</p>
          @if (countdown > 0) {
            <p>Time remaining to upload ID proof: {{ countdown }}s</p>
          }
          
          @if (!booking.idProof) {
            <div class="id-proof-upload">
              <h3>Upload ID Proof</h3>
              <input type="file" (change)="onFileSelected($event)" accept=".pdf,.jpg,.jpeg,.png" />
              <button (click)="uploadIdProof()" [disabled]="!selectedFile">Upload ID Proof</button>
            </div>
          } @else {
            <p class="uploaded">‚úÖ ID Proof uploaded - Under review</p>
          }
        </div>
      } @else if (booking.status === 'approved') {
        <div class="booking-status approved">
          <p>‚úÖ Booking Approved!</p>
          <p>Your seat has been confirmed for this event.</p>
        </div>
      } @else if (booking.status === 'rejected') {
        <div class="booking-status rejected">
          <p>‚ùå Booking Rejected</p>
          @if (booking.rejectionReason) {
            <p><strong>Reason:</strong> {{ booking.rejectionReason }}</p>
          }
        </div>
      } @else if (booking.status === 'cancelled') {
        <div class="booking-status cancelled">
          <p>üö´ Booking Cancelled</p>
        </div>
      } @else {
        <p class="expired">‚ùå Reservation expired</p>
      }
    }
  } @else {
    <p>Loading event...</p>
  }
</div>
